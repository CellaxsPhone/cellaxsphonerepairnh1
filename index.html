<script>
const brand = document.getElementById("brand");
const series = document.getElementById("series");
const model = document.getElementById("model");

/* UTIL FUNCTIONS */
function range(start, end) {
  return Array.from({ length: end - start + 1 }, (_, i) => start + i);
}

function addVariants(base, variants) {
  return variants.map(v => `${base} ${v}`);
}

/* DATA GENERATORS */
const data = {

  Apple: {
    "iPhone Series": () => {
      let models = [];
      range(6, 17).forEach(n => {
        models.push(`iPhone ${n}`);
        models.push(`iPhone ${n} Plus`);
        models.push(`iPhone ${n} Pro`);
        models.push(`iPhone ${n} Pro Max`);
        if (n >= 12 && n <= 13) models.push(`iPhone ${n} Mini`);
      });
      return models;
    }
  },

  Samsung: {
    "Galaxy S Series": () => {
      let models = [];
      range(6, 24).forEach(n => {
        models.push(`Galaxy S${n}`);
        models.push(`Galaxy S${n}+`);
        models.push(`Galaxy S${n} Ultra`);
        models.push(`Galaxy S${n} FE`);
      });
      return models;
    },

    "Galaxy A Series": () => {
      let models = [];
      range(1, 99).forEach(n => {
        models.push(`Galaxy A${n}`);
        models.push(`Galaxy A${n}s`);
        models.push(`Galaxy A${n} 5G`);
      });
      return models;
    },

    "Galaxy Z Series": () => [
      "Z Flip", "Z Flip 3", "Z Flip 4", "Z Flip 5",
      "Z Fold", "Z Fold 2", "Z Fold 3", "Z Fold 4", "Z Fold 5"
    ]
  },

  Google: {
    "Pixel Series": () => {
      let models = [];
      range(1, 9).forEach(n => {
        models.push(`Pixel ${n}`);
        models.push(`Pixel ${n} Pro`);
        if (n >= 6) models.push(`Pixel ${n} Fold`);
      });
      return models;
    }
  },

  Motorola: {
    "Moto G Series": () => [
      "Moto G Play", "Moto G Power", "Moto G Stylus",
      "Moto G Fast", "Moto G Pure"
    ],
    "Moto E Series": () => [
      "Moto E", "Moto E5", "Moto E6", "Moto E7", "Moto E13", "Moto E22"
    ],
    "Edge Series": () => [
      "Motorola Edge", "Edge+", "Edge 20", "Edge 30", "Edge 40", "Edge 50"
    ],
    "Razr Series": () => [
      "Razr 5G", "Razr+", "Razr 40", "Razr 40 Ultra"
    ]
  },

  Tablet: {
    "iPad": () => [
      "iPad 7th Gen", "8th Gen", "9th Gen", "10th Gen"
    ],
    "iPad Air": () => [
      "Air 3", "Air 4", "Air 5"
    ],
    "iPad Pro": () => [
      "11-inch", "12.9-inch"
    ],
    "Android Tablet": () => [
      "Galaxy Tab A", "Galaxy Tab S", "Other Android Tablet"
    ]
  },

  Laptop: {
    "MacBook": () => [
      "MacBook Air", "MacBook Pro 13", "MacBook Pro 14", "MacBook Pro 16"
    ],
    "Windows Laptop": () => [
      "Dell", "HP", "Lenovo", "Asus", "Acer"
    ]
  },

  Watch: {
    "Apple Watch": () => [
      "Series 4", "5", "6", "7", "8", "9", "Ultra", "Ultra 2"
    ],
    "Samsung Watch": () => [
      "Galaxy Watch 4", "5", "6"
    ]
  },

  Console: {
    "PlayStation": () => [
      "PS4", "PS4 Slim", "PS4 Pro", "PS5", "PS5 Digital"
    ],
    "Xbox": () => [
      "Xbox One", "One S", "One X", "Series S", "Series X"
    ],
    "Nintendo": () => [
      "Switch", "Switch OLED", "Switch Lite"
    ]
  },

  Other: {
    "Other Device": () => ["Please describe your device"]
  }
};

/* EVENTS */
brand.addEventListener("change", () => {
  series.innerHTML = '<option value="">Select Series</option>';
  model.innerHTML = '<option value="">Select Model</option>';

  if (data[brand.value]) {
    Object.keys(data[brand.value]).forEach(s => {
      series.innerHTML += `<option value="${s}">${s}</option>`;
    });
  }
});

series.addEventListener("change", () => {
  model.innerHTML = '<option value="">Select Model</option>';

  const generator = data[brand.value][series.value];
  if (generator) {
    generator().forEach(m => {
      model.innerHTML += `<option>${m}</option>`;
    });
  }
});
</script>
